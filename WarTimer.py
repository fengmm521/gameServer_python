#!/usr/bin/env python# -*- coding: utf-8 -*-class WarTimer():    def __init__(self,warRun,target,callfunc,timespace = 1,repeattimes = 1,isRepeatforever = False,isRunBefor = False,isSendEvent = True,eventKey = ''):        self.timespace = timespace              #时间间隔        self.repeattimes = repeattimes            #重复次数        self.isRepeatforever = isRepeatforever     #是否无限重复        self.isRunBefor = isRunBefor        self.target = target        self.callfunc = callfunc                self.nextRun = 0.0                #下次运行时间        self.warRun = warRun        self.isSendEvent = isSendEvent        self.eventKey = eventKey                #事件类型'move':移动事件类型,'attack':基础攻击事件类型,'timer':简单定时器类型,'debuff':debuff事件类型,'blood':持续掉血类型        self.setTimer()    def setTimer(self):        self.nextRun = self.warRun.nowTime + self.timespace        if self.isRunBefor:            self.isRunBefor = False            self.callfunc()    def updata(self):        if self.isRepeatforever:            self.nextRun += self.timespace            self.callfunc()            self.warRun.updataTimerForList(self)        elif self.repeattimes > 0:            self.repeattimes -=1            self.nextRun += self.timespace            self.callfunc()            self.warRun.updataTimerForList(self)